{"version":3,"file":"vue-wc-wrapper.global.js","sources":["../src/utils.js","../src/index.js"],"sourcesContent":["const camelizeRE = /-(\\w)/g\nexport const camelize = (str) => {\n  return str.replace(camelizeRE, (_, c) => (c ? c.toUpperCase() : ''))\n}\n\nconst hyphenateRE = /\\B([A-Z])/g\nexport const hyphenate = (str) => {\n  return str.replace(hyphenateRE, '-$1').toLowerCase()\n}\n\nexport function getInitialProps(propsList) {\n  const res = {}\n  propsList.forEach((key) => {\n    res[key] = undefined\n  })\n  return res\n}\n\nexport function cloneElementsToShadowRoot(shadowRoot, elements) {\n  elements.forEach((el) => shadowRoot.appendChild(el.cloneNode(true)))\n}\n\nexport function getAllStyles(target, selector, filter) {\n  const elements = Array.prototype.slice.call(target.querySelectorAll(selector))\n\n  return filter ? elements.filter(filter) : elements\n}\n\nexport function observeStyleChanges(\n  callback,\n  target,\n  selector,\n  filter,\n  observeOptions\n) {\n  return new MutationObserver((mutations, observer) => {\n    mutations.forEach((mutation) => {\n      const matchedElements = Array.prototype.slice\n        .call(mutation.addedNodes)\n        .filter((node) => node.matches && node.matches(selector))\n\n      if (matchedElements.length > 0) {\n        callback(filter ? matchedElements.filter(filter) : matchedElements)\n      }\n    })\n  }).observe(target, observeOptions)\n}\n\nexport function injectHook(options, key, hook) {\n  options[key] = [].concat(options[key] || [])\n  options[key].unshift(hook)\n}\n\nexport function callHooks(vm, hook) {\n  if (vm) {\n    const hooks = vm.$options[hook] || []\n    hooks.forEach((hook) => {\n      hook.call(vm)\n    })\n  }\n}\n\nexport function createCustomEvent(name, args) {\n  return new CustomEvent(name, {\n    bubbles: false,\n    cancelable: false,\n    detail: args\n  })\n}\n\nconst isBoolean = (val) => /function Boolean/.test(String(val))\nconst isNumber = (val) => /function Number/.test(String(val))\n\nexport function convertAttributeValue(value, name, { type } = {}) {\n  if (isBoolean(type)) {\n    if (value === 'true' || value === 'false') {\n      return value === 'true'\n    }\n    if (value === '' || value === name) {\n      return true\n    }\n    return value != null\n  } else if (isNumber(type)) {\n    const parsed = parseFloat(value, 10)\n    return isNaN(parsed) ? value : parsed\n  } else {\n    return value\n  }\n}\n\nexport function toVNodes(h, children) {\n  const res = []\n  for (let i = 0, l = children.length; i < l; i++) {\n    res.push(toVNode(h, children[i]))\n  }\n  return res\n}\n\nfunction toVNode(h, node) {\n  if (node.nodeType === 3) {\n    return node.data.trim() ? node.data : null\n  } else if (node.nodeType === 1) {\n    const data = {\n      attrs: getAttributes(node),\n      domProps: {\n        innerHTML: node.innerHTML\n      }\n    }\n    if (data.attrs.slot) {\n      data.slot = data.attrs.slot\n      delete data.attrs.slot\n    }\n    return h(node.tagName, data)\n  } else {\n    return null\n  }\n}\n\nfunction getAttributes(node) {\n  const res = {}\n  for (let i = 0, l = node.attributes.length; i < l; i++) {\n    const attr = node.attributes[i]\n    res[attr.nodeName] = attr.nodeValue\n  }\n  return res\n}\n","import {\n  toVNodes,\n  camelize,\n  hyphenate,\n  callHooks,\n  injectHook,\n  getInitialProps,\n  createCustomEvent,\n  convertAttributeValue,\n  cloneElementsToShadowRoot,\n  getAllStyles,\n  observeStyleChanges\n} from './utils.js'\n\nexport default function wrap(Vue, Component, wrapOptions = {}) {\n  const isAsync = typeof Component === 'function' && !Component.cid\n  let isInitialized = false\n  let hyphenatedPropsList\n  let camelizedPropsList\n  let camelizedPropsMap\n\n  if (wrapOptions.globalStyles) {\n    const defaults = {\n      target: document.head,\n      selector:\n        'style, link[rel=\"stylesheet\"], link[rel=\"preload\"][as=\"style\"]',\n      filter: undefined,\n      observeOptions: { childList: true, subtree: true }\n    }\n\n    wrapOptions.globalStyles = {\n      ...defaults,\n      ...wrapOptions.globalStyles\n    }\n  }\n\n  function initialize(Component) {\n    if (isInitialized) return\n\n    const options =\n      typeof Component === 'function' ? Component.options : Component\n\n    // extract props info\n    const propsList = Array.isArray(options.props)\n      ? options.props\n      : Object.keys(options.props || {})\n    hyphenatedPropsList = propsList.map(hyphenate)\n    camelizedPropsList = propsList.map(camelize)\n    const originalPropsAsObject = Array.isArray(options.props)\n      ? {}\n      : options.props || {}\n    camelizedPropsMap = camelizedPropsList.reduce((map, key, i) => {\n      map[key] = originalPropsAsObject[propsList[i]]\n      return map\n    }, {})\n\n    // proxy $emit to native DOM events\n    injectHook(options, 'beforeCreate', function () {\n      const emit = this.$emit\n      this.$emit = (name, ...args) => {\n        this.$root.$options.customElement.dispatchEvent(\n          createCustomEvent(name, args)\n        )\n        return emit.call(this, name, ...args)\n      }\n    })\n\n    injectHook(options, 'created', function () {\n      // sync default props values to wrapper on created\n      camelizedPropsList.forEach((key) => {\n        this.$root.props[key] = this[key]\n      })\n    })\n\n    // proxy props as Element properties\n    camelizedPropsList.forEach((key) => {\n      Object.defineProperty(CustomElement.prototype, key, {\n        get() {\n          return this._wrapper.props[key]\n        },\n        set(newVal) {\n          this._wrapper.props[key] = newVal\n        },\n        enumerable: false,\n        configurable: true\n      })\n    })\n\n    isInitialized = true\n  }\n\n  function syncAttribute(el, key) {\n    const camelized = camelize(key)\n    const value = el.hasAttribute(key) ? el.getAttribute(key) : undefined\n    el._wrapper.props[camelized] = convertAttributeValue(\n      value,\n      key,\n      camelizedPropsMap[camelized]\n    )\n  }\n\n  class CustomElement extends HTMLElement {\n    constructor() {\n      const self = super()\n      self.attachShadow({ mode: 'open' })\n\n      const wrapper = (self._wrapper = new Vue({\n        name: 'shadow-root',\n        customElement: self,\n        shadowRoot: self.shadowRoot,\n        data() {\n          return {\n            props: {},\n            slotChildren: [],\n            ShadyDOMSlotsHack_slotsPassedToWrapper: false,\n            ShadyDOMSlotsHack_deregisterSetIntervalListener: null\n          }\n        },\n        render(h) {\n          return h(\n            Component,\n            {\n              ref: 'inner',\n              props: this.props\n            },\n            this.slotChildren\n          )\n        }\n      }))\n\n      if (window.ShadyDOM) {\n        // MutationObserver does not work inside shadowRoot when polyfilled with ShadyDOM\n        // this makes slot changes go unrecognized by our usage of MutationObserver\n        // https://github.com/webcomponents/polyfills/issues/81\n\n        // ShadyDOM has a function called ShadyDOM.childrenObserver but it doesn't do the job very thoroughly, as it\n        // cannot recognize changes in slots when the slot count hasn't changed, and seemingly doesn't recognized removal of elements (https://github.com/webcomponents/polyfills/issues/82)\n        // .. what it can do for us however, is to observe whether slots are ever added.\n        // once a slot is added, we'll apply the hack to this wrapper.\n        // if slots are never used, we're saving ourselves some performance cost.\n        window.ShadyDOM.observeChildren(this, () => {\n          if (!wrapper.ShadyDOMSlotsHack_slotsPassedToWrapper) {\n            wrapper.ShadyDOMSlotsHack_slotsPassedToWrapper = true\n          }\n        })\n\n        // Here is the ugly fix to work around the core issue, basically setInterval, but shared across all vue wc wrappers for performance\n        // we preserve the original MutationObserver code further down, because it observes all other changes for us.\n        window.ShadyDOMSlotsHack_setInterval =\n          window.ShadyDOMSlotsHack_setInterval ||\n          // eslint-disable-next-line no-extra-parens\n          new (function () {\n            this.listeners = []\n\n            this.add = (handler) => {\n              const id = Math.floor(Math.random() * 1000000)\n              this.listeners.push({\n                handler,\n                id\n              })\n\n              if (this.listeners.length === 1) {\n                // first entry added, start setInterval\n                this.start()\n              }\n              return id\n            }\n\n            this.remove = (idToRemove) => {\n              this.listeners.splice(\n                this.listeners.findIndex(({ id }) => id === idToRemove),\n                1\n              )\n\n              if (this.listeners.length === 0) {\n                // no entries left, stop setInterval\n                this.stop()\n              }\n            }\n\n            this.start = () => {\n              if (this.intervalId === undefined || this.intervalId === null) {\n                this.intervalId = window.setInterval(() => {\n                  this.listeners.forEach(({ handler }) => handler())\n                }, 100)\n              }\n            }\n\n            this.stop = () => {\n              if (this.intervalId) {\n                window.clearInterval(this.intervalId)\n                this.intervalId = null\n              }\n            }\n          })()\n\n        const id = window.ShadyDOMSlotsHack_setInterval.add(() => {\n          if (wrapper.ShadyDOMSlotsHack_slotsPassedToWrapper) {\n            // slots were added to the wrapper at some point, so update children at every interval\n            this.updateSlotChildren()\n          }\n        })\n\n        wrapper.ShadyDOMSlotsHack_deregisterSetIntervalListener = () =>\n          window.ShadyDOMSlotsHack_setInterval.remove(id)\n      }\n\n      // Use MutationObserver to react to future attribute & slot content change\n      const observer = new MutationObserver((mutations) => {\n        let hasChildrenChange = false\n        for (let i = 0; i < mutations.length; i++) {\n          const m = mutations[i]\n          if (isInitialized && m.type === 'attributes' && m.target === self) {\n            syncAttribute(self, m.attributeName)\n          } else {\n            hasChildrenChange = true\n          }\n        }\n        if (hasChildrenChange) {\n          this.updateSlotChildren()\n        }\n      })\n      observer.observe(self, {\n        childList: true,\n        subtree: true,\n        characterData: true,\n        attributes: true\n      })\n    }\n\n    get vueComponent() {\n      return this._wrapper.$refs.inner\n    }\n\n    updateSlotChildren() {\n      this._wrapper.slotChildren = Object.freeze(\n        toVNodes(this._wrapper.$createElement, this.childNodes)\n      )\n\n      if (this._wrapper.slotChildren.length === 0) {\n        // no slots present, revert the shadyDOM hack (if present)\n        this._wrapper.ShadyDOMSlotsHack_slotsPassedToWrapper = false\n      }\n    }\n\n    async connectedCallback() {\n      const wrapper = this._wrapper\n\n      // TODO: Vue's router will be instantiated immediately, before the router\n      // in `mover-app` has finished transitioning URLs, making the Vue router\n      // resolve the wrong URL. Wait one micro-task to allow `mover-app`'s\n      // router to finish transitioning.\n      await Promise.resolve()\n\n      if (!wrapper._isMounted) {\n        // initialize attributes\n        const syncInitialAttributes = () => {\n          wrapper.props = getInitialProps(camelizedPropsList)\n          hyphenatedPropsList.forEach((key) => {\n            syncAttribute(this, key)\n          })\n        }\n\n        if (isInitialized) {\n          syncInitialAttributes()\n        } else {\n          // async & unresolved\n          Component().then((resolved) => {\n            if (\n              resolved.__esModule ||\n              // assume userland has polyfilled this\n              // eslint-disable-next-line\n              resolved[Symbol.toStringTag] === 'Module'\n            ) {\n              resolved = resolved.default\n            }\n            initialize(resolved)\n            syncInitialAttributes()\n          })\n        }\n        // initialize children\n        this.updateSlotChildren()\n\n        // doing this will let us access the shadow root via `this.$root.$el.getRootNode()`\n        // inside of the mounted hook, which is important for copying global styles to the shadow dom.\n        const tempContainer = document.createElement('div')\n        this.shadowRoot.appendChild(tempContainer)\n\n        if (wrapOptions.globalStyles) {\n          // all initial styles\n          cloneElementsToShadowRoot(\n            this.shadowRoot,\n            getAllStyles(\n              wrapOptions.globalStyles.target,\n              wrapOptions.globalStyles.selector,\n              wrapOptions.globalStyles.filter\n            )\n          )\n\n          // all added styles\n          observeStyleChanges(\n            (elements) => {\n              cloneElementsToShadowRoot(this.shadowRoot, elements)\n            },\n            wrapOptions.globalStyles.target,\n            wrapOptions.globalStyles.selector,\n            wrapOptions.globalStyles.filter,\n            wrapOptions.globalStyles.observeOptions\n          )\n        }\n\n        // tempContainer will be completely rewritten\n        wrapper.$mount(tempContainer)\n      } else {\n        callHooks(this.vueComponent, 'activated')\n      }\n    }\n\n    disconnectedCallback() {\n      if (\n        this._wrapper &&\n        this._wrapper.ShadyDOMSlotsHack_deregisterSetIntervalListener\n      ) {\n        this._wrapper.ShadyDOMSlotsHack_deregisterSetIntervalListener()\n      }\n\n      callHooks(this.vueComponent, 'deactivated')\n    }\n  }\n\n  if (!isAsync) {\n    initialize(Component)\n  }\n\n  return CustomElement\n}\n"],"names":["camelizeRE","camelize","str","replace","_","c","toUpperCase","hyphenateRE","hyphenate","toLowerCase","getInitialProps","propsList","res","forEach","key","undefined","cloneElementsToShadowRoot","shadowRoot","elements","el","appendChild","cloneNode","getAllStyles","target","selector","filter","Array","prototype","slice","call","querySelectorAll","observeStyleChanges","callback","observeOptions","MutationObserver","mutations","observer","mutation","matchedElements","addedNodes","node","matches","length","observe","injectHook","options","hook","concat","unshift","callHooks","vm","$options","createCustomEvent","name","args","CustomEvent","bubbles","cancelable","detail","isBoolean","val","test","String","isNumber","convertAttributeValue","value","type","parsed","parseFloat","isNaN","toVNodes","h","children","i","l","push","toVNode","nodeType","data","trim","attrs","getAttributes","domProps","innerHTML","slot","tagName","attributes","attr","nodeName","nodeValue","Vue","Component","hyphenatedPropsList","camelizedPropsList","camelizedPropsMap","wrapOptions","isAsync","cid","isInitialized","globalStyles","defaults","document","head","childList","subtree","initialize","isArray","props","Object","keys","map","originalPropsAsObject","reduce","emit","this","$emit","_this","$root","customElement","dispatchEvent","_this2","defineProperty","CustomElement","get","_wrapper","set","newVal","enumerable","configurable","syncAttribute","camelized","hasAttribute","getAttribute","self","attachShadow","mode","wrapper","slotChildren","ShadyDOMSlotsHack_slotsPassedToWrapper","ShadyDOMSlotsHack_deregisterSetIntervalListener","render","ref","window","ShadyDOM","observeChildren","ShadyDOMSlotsHack_setInterval","listeners","add","handler","id","Math","floor","random","_this4","start","remove","idToRemove","splice","findIndex","stop","intervalId","setInterval","clearInterval","updateSlotChildren","hasChildrenChange","m","attributeName","characterData","freeze","$createElement","childNodes","Promise","resolve","_isMounted","vueComponent","syncInitialAttributes","_this5","then","resolved","__esModule","Symbol","toStringTag","default","tempContainer","createElement","$mount","$refs","inner","HTMLElement"],"mappings":"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"}