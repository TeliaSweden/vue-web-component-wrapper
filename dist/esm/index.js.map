{"version":3,"file":"index.js","sources":["../../src/index.js"],"sourcesContent":["import {\n  toVNodes,\n  camelize,\n  hyphenate,\n  callHooks,\n  injectHook,\n  getInitialProps,\n  createCustomEvent,\n  convertAttributeValue,\n  cloneElementsToShadowRoot,\n  getAllStyles,\n  observeStyleChanges\n} from './utils.js'\n\nexport default function wrap(Vue, Component, wrapOptions = {}) {\n  const isAsync = typeof Component === 'function' && !Component.cid\n  let isInitialized = false\n  let hyphenatedPropsList\n  let camelizedPropsList\n  let camelizedPropsMap\n\n  if (wrapOptions.globalStyles) {\n    const defaults = {\n      target: document.head,\n      selector:\n        'style, link[rel=\"stylesheet\"], link[rel=\"preload\"][as=\"style\"]',\n      filter: undefined,\n      observeOptions: { childList: true, subtree: true }\n    }\n\n    wrapOptions.globalStyles = {\n      ...defaults,\n      ...wrapOptions.globalStyles\n    }\n  }\n\n  function initialize(Component) {\n    if (isInitialized) return\n\n    const options =\n      typeof Component === 'function' ? Component.options : Component\n\n    // extract props info\n    let propsList = Array.isArray(options.props)\n      ? options.props\n      : Object.keys(options.props || {})\n\n    if (wrapOptions.jsonMapping) {\n      // add the json props\n\n      const shouldBeSerializable = (type) => type === Array || type === Object\n\n      let jsonProps = {}\n      if (!Array.isArray(options.props || {})) {\n        // create -json serializable props based on existing props\n        jsonProps = Object.keys(options.props || {}).reduce(\n          (coll = {}, propName) => {\n            const sourceProp = (options.props || {})[propName]\n\n            if (sourceProp === undefined) {\n              return coll\n            }\n\n            const type = 'type' in sourceProp ? sourceProp.type : sourceProp\n\n            if (shouldBeSerializable(type)) {\n              coll[propName + 'Json'] = {\n                type: String\n              }\n            }\n\n            return coll\n          },\n          {}\n        )\n      }\n\n      propsList = propsList.concat(Object.keys(jsonProps))\n    }\n\n    hyphenatedPropsList = propsList.map(hyphenate)\n    camelizedPropsList = propsList.map(camelize)\n    const originalPropsAsObject = Array.isArray(options.props)\n      ? {}\n      : options.props || {}\n    camelizedPropsMap = camelizedPropsList.reduce((map, key, i) => {\n      map[key] = originalPropsAsObject[propsList[i]]\n      return map\n    }, {})\n\n    // proxy $emit to native DOM events\n    injectHook(options, 'beforeCreate', function () {\n      const emit = this.$emit\n      this.$emit = (name, ...args) => {\n        this.$root.$options.customElement.dispatchEvent(\n          createCustomEvent(name, args)\n        )\n        return emit.call(this, name, ...args)\n      }\n    })\n\n    injectHook(options, 'created', function () {\n      // sync default props values to wrapper on created\n      camelizedPropsList.forEach((key) => {\n        this.$root.props[key] = this[key]\n      })\n    })\n\n    // proxy props as Element properties\n    camelizedPropsList.forEach((key) => {\n      Object.defineProperty(CustomElement.prototype, key, {\n        get() {\n          return this._wrapper.props[key]\n        },\n        set(newVal) {\n          this._wrapper.props[key] = newVal\n        },\n        enumerable: false,\n        configurable: true\n      })\n    })\n\n    isInitialized = true\n  }\n\n  function syncAttribute(el, key) {\n    const jsonSuffixed = key.endsWith('-json')\n    const camelized = camelize(key.replace(/-json$/, ''))\n\n    const value = el.hasAttribute(key) ? el.getAttribute(key) : undefined\n\n    // we don't want an undefined json suffix to override the normal prop value (if any)\n    if (!jsonSuffixed || value) {\n      el._wrapper.props[camelized] = convertAttributeValue(\n        value,\n        key,\n        camelizedPropsMap[camelized]\n      )\n    }\n  }\n\n  class CustomElement extends HTMLElement {\n    initShadyDOMCompatability() {\n      // MutationObserver does not work inside shadowRoot when polyfilled with ShadyDOM\n      // this makes slot changes go unrecognized by our usage of MutationObserver\n      // https://github.com/webcomponents/polyfills/issues/81\n\n      // ShadyDOM has a function called ShadyDOM.childrenObserver but it doesn't do the job very thoroughly, as it\n      // cannot recognize changes in slots when the slot count hasn't changed, and seemingly doesn't recognized removal of elements (https://github.com/webcomponents/polyfills/issues/82)\n      // .. what it can do for us however, is to observe whether slots are ever added.\n      // once a slot is added, we'll apply the hack to this wrapper.\n      // if slots are never used, we're saving ourselves some performance cost.\n      window.ShadyDOM.observeChildren(this, () => {\n        if (!this._wrapper.ShadyDOMSlotsHack_slotsPassedToWrapper) {\n          this._wrapper.ShadyDOMSlotsHack_slotsPassedToWrapper = true\n        }\n      })\n\n      // Here is the ugly fix to work around the core issue, basically setInterval, but shared across all vue wc wrappers for performance\n      // we preserve the original MutationObserver code further down, because it observes all other changes for us.\n      window.ShadyDOMSlotsHack_setInterval =\n        window.ShadyDOMSlotsHack_setInterval ||\n        // eslint-disable-next-line no-extra-parens\n        new (function () {\n          this.listeners = []\n\n          this.add = (handler) => {\n            const id = Math.floor(Math.random() * 1000000)\n            this.listeners.push({\n              handler,\n              id\n            })\n\n            if (this.listeners.length === 1) {\n              // first entry added, start setInterval\n              this.start()\n            }\n            return id\n          }\n\n          this.remove = (idToRemove) => {\n            this.listeners.splice(\n              this.listeners.findIndex(({ id }) => id === idToRemove),\n              1\n            )\n\n            if (this.listeners.length === 0) {\n              // no entries left, stop setInterval\n              this.stop()\n            }\n          }\n\n          this.start = () => {\n            if (this.intervalId === undefined || this.intervalId === null) {\n              this.intervalId = window.setInterval(() => {\n                this.listeners.forEach(({ handler }) => handler())\n              }, 100)\n            }\n          }\n\n          this.stop = () => {\n            if (this.intervalId) {\n              window.clearInterval(this.intervalId)\n              this.intervalId = null\n            }\n          }\n        })()\n\n      const id = window.ShadyDOMSlotsHack_setInterval.add(() => {\n        if (this._wrapper.ShadyDOMSlotsHack_slotsPassedToWrapper) {\n          // slots were added to the wrapper at some point, so update children at every interval\n          this.updateSlotChildren()\n        }\n      })\n\n      this._wrapper.ShadyDOMSlotsHack_deregisterSetIntervalListener = () =>\n        window.ShadyDOMSlotsHack_setInterval.remove(id)\n    }\n\n    init() {\n      const self = this\n\n      if (!this.shadowRoot) {\n        this.attachShadow({ mode: 'open' })\n      }\n\n      this._wrapper = self._wrapper = new Vue({\n        name: 'shadow-root',\n        customElement: self,\n        shadowRoot: this.shadowRoot,\n        data() {\n          return {\n            props: {},\n            slotChildren: [],\n            ShadyDOMSlotsHack_slotsPassedToWrapper: false,\n            ShadyDOMSlotsHack_deregisterSetIntervalListener: null\n          }\n        },\n        render(h) {\n          return h(\n            Component,\n            {\n              ref: 'inner',\n              props: this.props\n            },\n            this.slotChildren\n          )\n        }\n      })\n\n      // options can be passed to ShadyDOM in window, so check for a relevant polyfill method as well.\n      if (window.ShadyDOM && window.ShadyDOM.observeChildren) {\n        this.initShadyDOMCompatability()\n      }\n\n      // Use MutationObserver to react to future attribute & slot content change\n      const observer = new MutationObserver((mutations) => {\n        let hasChildrenChange = false\n        for (let i = 0; i < mutations.length; i++) {\n          const m = mutations[i]\n          if (isInitialized && m.type === 'attributes' && m.target === self) {\n            syncAttribute(self, m.attributeName)\n          } else {\n            hasChildrenChange = true\n          }\n        }\n        if (hasChildrenChange) {\n          this.updateSlotChildren()\n        }\n      })\n      observer.observe(self, {\n        childList: true,\n        subtree: true,\n        characterData: true,\n        attributes: true\n      })\n    }\n\n    get vueComponent() {\n      return this._wrapper.$refs.inner\n    }\n\n    updateSlotChildren() {\n      this._wrapper.slotChildren = Object.freeze(\n        toVNodes(this._wrapper.$createElement, this.childNodes)\n      )\n\n      if (this._wrapper.slotChildren.length === 0) {\n        // no slots present, revert the shadyDOM hack (if present)\n        this._wrapper.ShadyDOMSlotsHack_slotsPassedToWrapper = false\n      }\n    }\n\n    async connectedCallback() {\n      // TODO: Vue's router will be instantiated immediately, before the router\n      // in `mover-app` has finished transitioning URLs, making the Vue router\n      // resolve the wrong URL. Wait one micro-task to allow `mover-app`'s\n      // router to finish transitioning.\n      await Promise.resolve()\n\n      if (!this.initDone) {\n        this.initDone = true\n        this.init()\n      }\n\n      if (!this._wrapper._isMounted) {\n        // initialize attributes\n        const syncInitialAttributes = () => {\n          this._wrapper.props = getInitialProps(camelizedPropsList)\n          hyphenatedPropsList.forEach((key) => {\n            syncAttribute(this, key)\n          })\n        }\n\n        if (isInitialized) {\n          syncInitialAttributes()\n        } else {\n          // async & unresolved\n          Component().then((resolved) => {\n            if (\n              resolved.__esModule ||\n              // assume userland has polyfilled this\n              // eslint-disable-next-line\n              resolved[Symbol.toStringTag] === 'Module'\n            ) {\n              resolved = resolved.default\n            }\n            initialize(resolved)\n            syncInitialAttributes()\n          })\n        }\n        // initialize children\n        this.updateSlotChildren()\n\n        // doing this will let us access the shadow root via `this.$root.$el.getRootNode()`\n        // inside of the mounted hook, which is important for copying global styles to the shadow dom.\n        const tempContainer = document.createElement('div')\n        this.shadowRoot.appendChild(tempContainer)\n\n        if (wrapOptions.globalStyles) {\n          // all initial styles\n          cloneElementsToShadowRoot(\n            this.shadowRoot,\n            getAllStyles(\n              wrapOptions.globalStyles.target,\n              wrapOptions.globalStyles.selector,\n              wrapOptions.globalStyles.filter\n            )\n          )\n\n          // all added styles\n          observeStyleChanges(\n            (elements) => {\n              cloneElementsToShadowRoot(this.shadowRoot, elements)\n            },\n            wrapOptions.globalStyles.target,\n            wrapOptions.globalStyles.selector,\n            wrapOptions.globalStyles.filter,\n            wrapOptions.globalStyles.observeOptions\n          )\n        }\n\n        // tempContainer will be completely rewritten\n        this._wrapper.$mount(tempContainer)\n      } else {\n        callHooks(this.vueComponent, 'activated')\n      }\n    }\n\n    disconnectedCallback() {\n      if (\n        this._wrapper &&\n        this._wrapper.ShadyDOMSlotsHack_deregisterSetIntervalListener\n      ) {\n        this._wrapper.ShadyDOMSlotsHack_deregisterSetIntervalListener()\n      }\n\n      callHooks(this.vueComponent, 'deactivated')\n    }\n  }\n\n  if (!isAsync) {\n    initialize(Component)\n  }\n\n  return CustomElement\n}\n"],"names":[],"mappings":"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"}